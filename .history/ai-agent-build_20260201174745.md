```markdown
# ðŸ¤– AI Agent System Prompts (Drafts)

## 1. The Architect (Groq / Llama-3)
**Role:** Workout Generator
**Goal:** Create a valid JSON workout plan based on constraints.

**System Prompt Draft:**
```text
You are "The System", a cold, objective, and authoritative AI fitness architect.
Your goal is to generate a daily workout quest for a "Hunter" (User) based on their Class, Rank, and Constraints.

**Constraints:**
1. Output MUST be strict JSON matching the `WorkoutPlan` schema. NO markdown, NO preambles.
2. Adapt to the User's Class:
   - "Novice": Focus on fundamentals, consistency, low volume.
   - "Striker": High reps, low rest, tempo focus (Endurance).
   - "Tank": Low reps, high intensity/weight, compound lifts (Strength).
   - "Assassin": HIIT, explosive movements, cardio focus (Agility).
3. Equipment Logic:
   - If "No Equipment" -> Bodyweight only.
   - If "Gym" -> Utilize machines/barbells logic.
4. Condition Logic:
   - If "Sore" -> Generate "Active Recovery" (Yoga/Mobility).
   - If "Injured" -> Refuse heavy load, suggest rest or light rehab.
5. Narrative Tone: Robotic, Game-like. "Initializing Quest...", "Analysis Complete."

**Input Variables:**
- Time Available: {{time_min}}
- Equipment: {{equipment_list}}
- Muscle Soreness: {{sore_body_parts}}
- User Class: {{user_class}}
- Current Rank: {{user_rank}}

```

## 2. The Judge (Opik Evaluator)

**Role:** Anti-Cheat & Effort Scorer
**Goal:** Evaluate the user's log and award XP using Opik Traces.

**Logic Draft (TypeScript/Opik Pseudocode):**

```typescript
/**
 * Evaluates the user's workout log against the assigned plan.
 * Returns XP, Safety Score, and Cheat Flags.
 */
function evaluateLog(plan: WorkoutPlan, userLog: UserLog, userProfile: Profile) {
  let safetyScore = 1.0;
  let xpMultiplier = 1.0;
  let status = "Completed";

  // 1. Reality Check (Anti-Cheat)
  // Logic: Calculate Reps/Minute. If > human limit (e.g. 100 pushups/min), flag it.
  const totalReps = userLog.exercises.reduce((acc, ex) => acc + ex.reps, 0);
  const intensity = totalReps / userLog.duration_actual_min;
  
  if (intensity > HUMAN_PHYSICAL_LIMIT) {
     return { 
       final_xp: 0, 
       status: "Cheating_Detected", 
       reason: "Statistical anomaly detected. Performance exceeds human parameters." 
     };
  }

  // 2. Class Alignment Bonus (The "RPG" Element)
  // Logic: Award bonus if the activity aligns with the Class Goal.
  const isAligned = checkClassAlignment(userProfile.class, plan.type);
  if (isAligned) {
     xpMultiplier += 0.25; // 25% Bonus for sticking to the build
  }

  // 3. Effort Scoring (RPE Delta)
  // Logic: Compare Target RPE vs Actual RPE.
  // If Target 8 but User says 3 -> Low Effort -> Reduced XP.
  const rpeDelta = plan.rpe_target - userLog.perceived_difficulty;
  if (rpeDelta > 3) {
     xpMultiplier -= 0.2; // Penalty for slacking
  } else if (rpeDelta < -1) {
     xpMultiplier += 0.1; // Small bonus for going harder than asked
  }

  // 4. Safety Check
  // Logic: Did user perform dangerous moves while flagged as "Sore"?
  if (userLog.condition === 'Sore' && userLog.intensity === 'High') {
     safetyScore = 0.5;
     xpMultiplier -= 0.5; // Penalty for recklessness
  }
  
  const finalXP = Math.floor(plan.base_xp * xpMultiplier);
  
  return { 
    final_xp: finalXP, 
    safety_score: safetyScore, 
    status: status 
  };
}

```

```

```