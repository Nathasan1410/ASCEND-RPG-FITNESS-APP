# üèõÔ∏è PROJECT CONTEXT: "The System" (AI Hunter Gym)

## üéØ Executive Summary
**"The System"** is a gamified AI fitness application inspired by *Solo Leveling*. It turns daily workouts into an RPG "Daily Quest" where users gain XP, level up, and unlock classes based on real-world effort.
- **Core Value:** Making fitness addictive through gamification and personalized AI planning.
- **Winning Edge (Hackathon):** Using **Opik** not just for tracing, but as a **"Game Master Judge"** that evaluates user effort, calculates dynamic XP, and detects cheating (Anti-Cheat System).
- **Target Deadline:** Feb 8th, 2026 (1 Week Sprint).

---

## üõ†Ô∏è Tech Stack & Constraints
- **Framework:** Next.js 14 (App Router)
- **Styling:** Tailwind CSS + Framer Motion (Aesthetic: Dark Mode, Neon Blue `#2563eb`, Success Teal `#14b8a6`, Glassmorphism).
- **Backend/DB:** Supabase (Auth, Postgres, Realtime).
- **AI Engine:** **Groq** (Llama-3-70b) for high-speed workout generation.
- **Observability:** **Opik** (Comet) for tracing AI calls and "LLM-as-a-Judge" logic.
- **No Web3:** Pure Web2 implementation for speed and UX.

---

## üéÆ Game Mechanics (The Logic)

### 1. Classes (The "Build")
Users select a path that dictates the workout style generated by the AI:
- **Novice (Base Builder):** Focus on consistency. Low penalty.
- **Striker (Endurance/Speed):** High volume, short rest.
- **Tank (Hypertrophy/Bulking):** High intensity, heavy load/slow tempo.
- **Assassin (Fat Loss/Cutting):** HIIT, Cardio, Calorie burn focus.

### 2. The Loop (User Flow)
1.  **Check-In:** User inputs `Available Time` (e.g., 30m) & `Condition` (e.g., Sore/Fresh).
2.  **Resource Check:** AI checks inventory (Gym Access? Pull-up bar? Just floor?).
3.  **Quest Generation:** **Groq** generates a JSON workout plan tailored to the inputs.
4.  **Execution:** User performs workout and submits a `Completion Report` (Checkbox/Text/Voice).
5.  **The Judgment (Opik):**
    - The AI analyzes the report vs. the plan.
    - Calculates **Dynamic XP** (Base XP + Effort Bonus).
    - Checks for **Cheating** (e.g., "1000 pushups in 1 min" -> Flagged).
6.  **Level Up:** XP fills the bar -> Rank Up (E-Rank -> D-Rank).

### 3. Social & Seasons
- **Leaderboard:** Resets every "Season" (e.g., monthly). Realtime updates via Supabase.
- **Flexing:** Generate shareable "Quest Complete" cards with stats.

---

## ü§ñ AI Agent Personas

### Agent A: "The Architect" (Planner)
- **Role:** Generates the Daily Quest.
- **Persona:** Cold, Objective, "The System".
- **Input:** Time, Equipment, Body Condition, Class.
- **Output:** Strict JSON Array of exercises.
- **Prompt Directive:** *Never suggest dangerous exercises for 'Sore' users. Always maximize the given time window.*

### Agent B: "The Judge" (Opik Evaluator)
- **Role:** Evaluates post-workout logs.
- **Persona:** Fair but strict.
- **Task:**
    1.  **Safety Check:** Did the Architect assign safe moves?
    2.  **Anti-Cheat:** Is the user's log physically possible?
    3.  **XP Calculation:** Award bonus XP for consistency or breaking PRs.

---

## üìù Coding Standards (Strict Rules for OpenCode)

1.  **Project Structure:**
    - `/app`: Next.js App Router pages.
    - `/components/ui`: Shadcn/Tailwind components.
    - `/lib/supabase`: Supabase clients.
    - `/lib/ai`: Groq & Opik client setup.
    - `/server/actions`: Server Actions for all DB mutations (No API routes unless necessary).

2.  **Database & Types:**
    - Use **Supabase Types** generated from the schema.
    - Strict TypeScript interfaces for all AI JSON outputs (`WorkoutPlan`, `Exercise`).

3.  **UI/UX:**
    - **Dark Mode Default:** The app should feel like a "System Interface".
    - **Loading States:** Use Skeleton loaders or "System Initializing..." animations.
    - **Toast Notifications:** Use `sonner` or `react-hot-toast` for feedback.

4.  **AI Integration:**
    - **Groq Calls:** Must be wrapped in `opik.trace` for observability.
    - **Prompt Engineering:** Store prompts in `/lib/ai/prompts.ts` to keep logic clean.

---

## üìÖ Hackathon Roadmap (MVP)

- **Phase 1 (Data):** Setup Supabase Tables (`profiles`, `quests`, `logs`).
- **Phase 2 (Onboarding):** "The Awakening" Flow (Height/Weight/Rank Test).
- **Phase 3 (Core Loop):** Groq Integration for Workout Gen + Check-in UI.
- **Phase 4 (Gamification):** XP Logic, Leveling System, & Opik Judge Script.
- **Phase 5 (Polish):** Leaderboard, Share Card, & Hexagon Stats UI.

---

*Use this context to guide all code generation. Focus on speed, stability, and the "System" aesthetic.*