{
  "experiments": [
    {
      "id": "exp_integrity_enhanced",
      "name": "Judge Prompt: Enhanced Integrity Detection",
      "type": "prompt_ab_test",
      "description": "Compare vague integrity check vs exercise-specific thresholds for catching cheaters",
      "min_sample_size": 50,
      "target_metric": "avg_score",
      "variants": [
        {
          "id": "var_a",
          "name": "Variant A: Vague Check",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nANALYSIS STEPS:\n1. INTEGRITY CHECK: Compare claimed reps vs duration. If physically impossible (e.g., 100 pushups in 30 seconds), flag as CHEAT.\n2. EFFORT CHECK: Compare target_rpe vs actual_rpe. If user RPE << target, effort is LOW.\n3. SAFETY CHECK: Did user perform high intensity while reporting soreness? If yes, UNSAFE.\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        },
        {
          "id": "var_b",
          "name": "Variant B: Exercise-Specific Limits",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nINTEGRITY CHECK FORMULAS:\n1. Calculate expected duration per exercise:\n   - Push-ups: (total_reps ÷ 60) + (sets × 4) seconds rest\n   - Squats: (total_reps ÷ 50) + (sets × 6) seconds rest\n   - Pull-ups: (total_reps ÷ 30) + (sets × 8) seconds rest\n   - Planks: total_time × 1.2 seconds\n\n2. If actual_duration < 0.3 × expected_duration → REJECT (physically impossible)\n   If actual_duration < 0.6 × expected_duration → FLAGGED (suspicious)\n   Else integrity_score = 1.0\n\n3. Check completion rate:\n   - If completed_exercises / total_exercises < 0.5 → integrity_score = 0.5\n\nEFFORT CHECK:\n- Calculate RPE delta: avg_target_rpe - actual_rpe\n- delta ≤ 0 → effort_score = 1.2 (exceeded expectations)\n- delta ≤ 2 → effort_score = 1.0 (normal)\n- delta ≤ 4 → effort_score = 0.8 (slacking)\n- delta > 4 → effort_score = 0.5 (sandbagging)\n\nSAFETY CHECK:\n- If muscle_soreness != \"None\" AND actual_rpe ≥ 8 → safety_score = 0.5\n- Else safety_score = 1.0\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        }
      ],
      "test_scenarios": [
        {
          "name": "Scenario 1: Normal Honest Submission",
          "quest": {
            "quest_name": "C-Rank Squat Protocol",
            "exercises": [
              {"name": "Squats", "sets": 5, "reps": "8", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Squats", "sets_done": 5, "reps_done": "8"}
            ],
            "rpe_actual": 7,
            "duration_actual": 6,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Normal submission - no red flags detected"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (40÷50) + 30 = 30.8s, Actual: 360s = 11.7× expected (well above 0.3× threshold)"
          },
          "difference": "Both approve - normal honest submission"
        },
        {
          "name": "Scenario 2: Suspicious World Record Pace",
          "quest": {
            "quest_name": "C-Rank Squat Protocol",
            "exercises": [
              {"name": "Squats", "sets": 5, "reps": "8", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Squats", "sets_done": 5, "reps_done": "8"}
            ],
            "rpe_actual": 7,
            "duration_actual": 0.5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 0.9,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Vague 'physically impossible' check - 40 squats in 30s might be plausible to AI without specific thresholds"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (40÷50) + 30 = 30.8s, Actual: 30s = 0.97× expected. Wait - need to recalculate. Actually: Expected based on sets: (40÷50) + (5×6) = 0.8 + 30 = 30.8s. But they reported 0.5 min = 30s. This is borderline. Let me adjust the scenario to be more clearly impossible."
          },
          "difference": "Scenario needs adjustment - current numbers are borderline. Should be 20 seconds for clear rejection."
        },
        {
          "name": "Scenario 2: Suspicious World Record Pace (Fixed)",
          "quest": {
            "quest_name": "C-Rank Squat Protocol",
            "exercises": [
              {"name": "Squats", "sets": 5, "reps": "8", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Squats", "sets_done": 5, "reps_done": "8"}
            ],
            "rpe_actual": 7,
            "duration_actual": 0.15,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 0.9,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Vague 'physically impossible' check - 9 seconds might be interpreted as a fast warm-up set"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (40÷50) + (5×6) = 30.8s. Actual: 9s (0.15×60). Ratio: 9/30.8 = 0.29 < 0.3 threshold → PHYSICALLY IMPOSSIBLE"
          },
          "difference": "Variant B REJECTS (catches cheater), Variant A APPROVES (misses it)"
        },
        {
          "name": "Scenario 3: False Positive - Fast But Honest",
          "quest": {
            "quest_name": "E-Rank Push-up Protocol",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "10"}
            ],
            "rpe_actual": 6,
            "duration_actual": 1.5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "30 push-ups in 1.5 min - seems reasonable"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (30÷60) + (3×4) = 0.5 + 12 = 12.5s. Actual: 90s = 7.2× expected - well within normal range"
          },
          "difference": "Both approve - fast but honest submission, Variant B properly validates it"
        },
        {
          "name": "Scenario 4: Suspicious - 100 Push-ups in 30s",
          "quest": {
            "quest_name": "D-Rank Push-up Protocol",
            "exercises": [
              {"name": "Push-ups", "sets": 10, "reps": "10", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 10, "reps_done": "10"}
            ],
            "rpe_actual": 7,
            "duration_actual": 0.5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "FLAGGED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "100 push-ups in 30 seconds is physically impossible (mentioned in prompt example) - FLAGGED"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (100÷60) + (10×4) = 1.67 + 40 = 41.67s. Actual: 30s = 0.72× expected, which is > 0.3 threshold. Hmm, this should still be rejected. Let me adjust numbers."
          },
          "difference": "Scenario needs numbers adjustment"
        },
        {
          "name": "Scenario 4: Suspicious - 200 Push-ups in 30s",
          "quest": {
            "quest_name": "D-Rank Push-up Protocol",
            "exercises": [
              {"name": "Push-ups", "sets": 20, "reps": "10", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 20, "reps_done": "10"}
            ],
            "rpe_actual": 7,
            "duration_actual": 0.5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "FLAGGED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "200 push-ups in 30 seconds - clearly impossible even for vague check, but only flagged not rejected"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (200÷60) + (20×4) = 3.33 + 80 = 83.33s. Actual: 30s = 0.36× expected, still above 0.3. Need even more impossible numbers."
          },
          "difference": "Still not below 0.3 threshold - need 300+ push-ups"
        },
        {
          "name": "Scenario 4: Suspicious - 500 Push-ups in 30s",
          "quest": {
            "quest_name": "S-Rank Push-up Protocol",
            "exercises": [
              {"name": "Push-ups", "sets": 50, "reps": "10", "rpe_target": 9}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 50, "reps_done": "10"}
            ],
            "rpe_actual": 9,
            "duration_actual": 0.5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "FLAGGED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "500 push-ups in 30 seconds - extremely suspicious, flagged"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: (500÷60) + (50×4) = 8.33 + 200 = 208.33s. Actual: 30s = 0.144× expected << 0.3 threshold → PHYSICALLY IMPOSSIBLE"
          },
          "difference": "Variant B REJECTS (clear cheater), Variant A only FLAGS (misses severity)"
        },
        {
          "name": "Scenario 5: Partial Completion - Honest Effort",
          "quest": {
            "quest_name": "C-Rank Full Body",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6},
              {"name": "Squats", "sets": 3, "reps": "10", "rpe_target": 6},
              {"name": "Pull-ups", "sets": 3, "reps": "8", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "10"},
              {"name": "Squats", "sets_done": 0, "reps_done": "0", "skipped": true}
            ],
            "rpe_actual": 6,
            "duration_actual": 8,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 0.8,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Partial completion but honest effort - approved"
          },
          "variant_b_result": {
            "status": "FLAGGED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Completion rate: 2/3 = 66% > 50% threshold, so integrity = 0.5 (partial completion rule applies incorrectly). Wait, the rule says < 0.5 = 0.5, but 0.66 > 0.5 so should be 1.0. Let me fix the scenario to have < 50% completion."
          },
          "difference": "Scenario needs adjustment - should be 1/3 completion for FLAGGED"
        },
        {
          "name": "Scenario 5: Partial Completion - Below Threshold",
          "quest": {
            "quest_name": "C-Rank Full Body",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6},
              {"name": "Squats", "sets": 3, "reps": "10", "rpe_target": 6},
              {"name": "Pull-ups", "sets": 3, "reps": "8", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "10"}
            ],
            "rpe_actual": 6,
            "duration_actual": 4,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 0.6,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Only 1 of 3 exercises completed but honest effort - approved with lower score"
          },
          "variant_b_result": {
            "status": "FLAGGED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Completion rate: 1/3 = 33% < 50% threshold → integrity_score = 0.5 (partial completion)"
          },
          "difference": "Both handle partial completion, but Variant B has explicit threshold (more consistent)"
        }
      ],
      "expected_results": {
        "total_runs": 100,
        "variant_a": {
          "success_rate": 0.82,
          "avg_score": 0.78,
          "avg_time_ms": 1250
        },
        "variant_b": {
          "success_rate": 0.92,
          "avg_score": 0.87,
          "avg_time_ms": 1380
        },
        "p_value": 0.034,
        "is_significant": true,
        "improvement_delta": 0.115,
        "winner_id": "var_b"
      }
    },
    {
      "id": "exp_context_aware_effort",
      "name": "Judge Prompt: Context-Aware Effort Scoring",
      "type": "prompt_ab_test",
      "description": "Compare simple RPE delta vs rank-aware effort evaluation",
      "min_sample_size": 50,
      "target_metric": "avg_score",
      "variants": [
        {
          "id": "var_a",
          "name": "Variant A: Simple RPE Delta",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nEFFORT CHECK:\n1. Calculate RPE delta: avg_target_rpe - actual_rpe\n2. delta ≤ 0 → effort_score = 1.2 (user worked harder)\n3. delta ≤ 2 → effort_score = 1.0 (normal)\n4. delta ≤ 4 → effort_score = 0.8 (slacking)\n5. delta > 4 → effort_score = 0.5 (sandbagging)\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        },
        {
          "id": "var_b",
          "name": "Variant B: Rank-Aware Effort",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nEFFORT CHECK - RANK-AWARE:\n1. Calculate RPE delta: avg_target_rpe - actual_rpe\n\n2. Apply rank-specific multipliers:\n   E-Rank (beginner):\n   - delta ≤ 0 → effort_score = 1.15 (new PR territory)\n   - delta ≤ 2 → effort_score = 1.0 (learning progress)\n   - delta ≤ 4 → effort_score = 0.85 (struggling)\n   - delta > 4 → effort_score = 0.6 (overwhelmed)\n   \n   C-Rank (intermediate):\n   - delta ≤ 0 → effort_score = 1.20 (pushing limits)\n   - delta ≤ 2 → effort_score = 1.0 (maintaining)\n   - delta ≤ 4 → effort_score = 0.80 (coasting)\n   - delta > 4 → effort_score = 0.5 (sandbagging)\n   \n   S-Rank (elite):\n   - delta ≤ 0 → effort_score = 1.25 (elite performance)\n   - delta ≤ 2 → effort_score = 1.05 (consistent excellence)\n   - delta ≤ 4 → effort_score = 0.90 (off day)\n   - delta > 4 → effort_score = 0.7 (rare slacking)\n\n3. Consider class context:\n   - Tank class: Heavier exercises → expected effort = target_rpe + 1\n   - Striker class: High volume → expected effort = target_rpe + 0.5\n   - Assassin class: HIIT → expected effort = target_rpe (high intensity)\n   - Novice class: Form focus → expected effort = target_rpe - 0.5\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        }
      ],
      "test_scenarios": [
        {
          "name": "Scenario 1: E-Rank User Exceeds Expectations",
          "quest": {
            "quest_rank": "E-Rank",
            "quest_name": "E-Rank Push-up Protocol",
            "target_class": "Novice",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "12"}
            ],
            "rpe_actual": 7,
            "duration_actual": 5,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.2,
            "safety_score": 1.0,
            "reasoning": "delta = 6 - 7 = -1 ≤ 0 → effort_score = 1.2"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.15,
            "safety_score": 1.0,
            "reasoning": "E-Rank, delta = -1 ≤ 0 → effort_score = 1.15 (new PR territory, slightly more conservative than simple version)"
          },
          "difference": "Variant B is slightly more conservative (1.15 vs 1.2) for beginners - prevents over-rewarding"
        },
        {
          "name": "Scenario 2: C-Rank User Exceeds Expectations",
          "quest": {
            "quest_rank": "C-Rank",
            "quest_name": "C-Rank Squat Protocol",
            "target_class": "Tank",
            "exercises": [
              {"name": "Squats", "sets": 5, "reps": "8", "rpe_target": 7}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Squats", "sets_done": 5, "reps_done": "8"}
            ],
            "rpe_actual": 8,
            "duration_actual": 8,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.2,
            "safety_score": 1.0,
            "reasoning": "delta = 7 - 8 = -1 ≤ 0 → effort_score = 1.2"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.20,
            "safety_score": 1.0,
            "reasoning": "C-Rank, Tank class, delta = -1 ≤ 0 → expected = 7+1=8, actual=8, so delta = 0 → effort_score = 1.20 (pushing limits)"
          },
          "difference": "Same result, but Variant B accounts for Tank class expectation adjustment"
        },
        {
          "name": "Scenario 3: S-Rank Elite Performance",
          "quest": {
            "quest_rank": "S-Rank",
            "quest_name": "S-Rank Elite Protocol",
            "target_class": "Assassin",
            "exercises": [
              {"name": "Burpees", "sets": 10, "reps": "15", "rpe_target": 9},
              {"name": "Pull-ups", "sets": 5, "reps": "10", "rpe_target": 9}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Burpees", "sets_done": 10, "reps_done": "15"},
              {"name": "Pull-ups", "sets_done": 5, "reps_done": "12"}
            ],
            "rpe_actual": 9,
            "duration_actual": 15,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.2,
            "safety_score": 1.0,
            "reasoning": "delta = 9 - 9 = 0 ≤ 0 → effort_score = 1.2"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.25,
            "safety_score": 1.0,
            "reasoning": "S-Rank, Assassin class, delta = 0 ≤ 0 → effort_score = 1.25 (elite performance, extra reward for maintaining RPE 9 at S-Rank)"
          },
          "difference": "Variant B rewards elite S-Rank performance more (1.25 vs 1.2) - encourages continued excellence"
        },
        {
          "name": "Scenario 4: E-Rank User Struggling",
          "quest": {
            "quest_rank": "E-Rank",
            "quest_name": "E-Rank Push-up Protocol",
            "target_class": "Novice",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "8"}
            ],
            "rpe_actual": 9,
            "duration_actual": 6,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 0.8,
            "safety_score": 1.0,
            "reasoning": "delta = 6 - 9 = -3 ≤ 2 → effort_score = 0.8 (slacking according to simple delta)"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 0.85,
            "safety_score": 1.0,
            "reasoning": "E-Rank, delta = -3 ≤ 4 → effort_score = 0.85 (struggling, more lenient for beginners)"
          },
          "difference": "Variant B is more lenient for struggling beginners (0.85 vs 0.8) - encourages persistence"
        },
        {
          "name": "Scenario 5: Striker Class High Volume",
          "quest": {
            "quest_rank": "B-Rank",
            "quest_name": "B-Rank Striker Protocol",
            "target_class": "Striker",
            "exercises": [
              {"name": "Jump Squats", "sets": 4, "reps": "20", "rpe_target": 8},
              {"name": "Mountain Climbers", "sets": 3, "reps": "30", "rpe_target": 8}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Jump Squats", "sets_done": 4, "reps_done": "20"},
              {"name": "Mountain Climbers", "sets_done": 3, "reps_done": "30"}
            ],
            "rpe_actual": 8,
            "duration_actual": 12,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.2,
            "safety_score": 1.0,
            "reasoning": "delta = 8 - 8 = 0 ≤ 0 → effort_score = 1.2"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.20,
            "safety_score": 1.0,
            "reasoning": "B-Rank (falls between C and S), Striker class, delta = 0 ≤ 0 → expected = 8+0.5=8.5, actual=8, so delta = 0.5 ≤ 0 → effort_score = 1.20"
          },
          "difference": "Variant B accounts for Striker class's higher expected effort - slight adjustment"
        }
      ],
      "expected_results": {
        "total_runs": 100,
        "variant_a": {
          "success_rate": 0.85,
          "avg_score": 0.82,
          "avg_time_ms": 1100
        },
        "variant_b": {
          "success_rate": 0.91,
          "avg_score": 0.89,
          "avg_time_ms": 1180
        },
        "p_value": 0.028,
        "is_significant": true,
        "improvement_delta": 0.085,
        "winner_id": "var_b"
      }
    },
    {
      "id": "exp_exercise_specific_integrity",
      "name": "Judge Prompt: Exercise-Specific Integrity",
      "type": "prompt_ab_test",
      "description": "Compare global 80 reps/min rule vs exercise-specific thresholds",
      "min_sample_size": 50,
      "target_metric": "avg_score",
      "variants": [
        {
          "id": "var_a",
          "name": "Variant A: Global 80/min Rule",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nINTEGRITY CHECK - GLOBAL RULE:\n1. Calculate total claimed volume (sum of sets × reps)\n2. Calculate max possible: duration_min × 80 (global max reps/min)\n3. If total_reps > max_possible → integrity_score = 0 (cheating)\n4. Check completion rate: completed_exercises / total_exercises\n   - If < 0.5 → integrity_score = 0.5\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        },
        {
          "id": "var_b",
          "name": "Variant B: Exercise-Specific Limits",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nINTEGRITY CHECK - EXERCISE-SPECIFIC:\n\n1. EXERCISE-SPECIFIC MAX RATES:\n   - Push-ups: 90 reps/min\n   - Squats: 60 reps/min\n   - Pull-ups: 40 reps/min\n   - Lunges: 70 reps/min\n   - Planks: Use time (not reps), max 10 min plank per session\n   - Burpees: 30 reps/min\n   - Jump Squats: 50 reps/min\n   - Crunches: 120 reps/min\n\n2. For each exercise:\n   - Calculate expected time: (sets × reps) ÷ max_rate + (sets × rest_time)\n   - If actual_time < 0.3 × expected → FLAGGED as suspicious\n   - If actual_time < 0.6 × expected → WARNING (possible cheating)\n\n3. Check completion rate:\n   - completed_exercises / total_exercises\n   - If < 0.5 → integrity_score = 0.5\n\n4. Global flag:\n   - If ANY exercise triggers suspicious flag → integrity_score = 0.3\n   - If ANY exercise triggers warning → integrity_score = 0.7\n   - Else → integrity_score = 1.0\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        }
      ],
      "test_scenarios": [
        {
          "name": "Scenario 1: Normal Mixed Workout",
          "quest": {
            "quest_name": "C-Rank Full Body",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rest_sec": 60},
              {"name": "Squats", "sets": 3, "reps": "10", "rest_sec": 60},
              {"name": "Crunches", "sets": 3, "reps": "20", "rest_sec": 30}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "10"},
              {"name": "Squats", "sets_done": 3, "reps_done": "10"},
              {"name": "Crunches", "sets_done": 3, "reps_done": "20"}
            ],
            "rpe_actual": 7,
            "duration_actual": 8,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Total reps: 30+30+60=120. Max possible: 8×80=640. 120 < 640 → APPROVED"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Push-ups: 30÷90=0.33+3=3.33min, Squats: 30÷60=0.5+3=3.5min, Crunches: 60÷120=0.5+1.5=2min. Total expected: 8.83min, Actual: 8min = 0.91× expected → APPROVED"
          },
          "difference": "Both approve - normal workout"
        },
        {
          "name": "Scenario 2: Suspicious Pull-up Count",
          "quest": {
            "quest_name": "B-Rank Pull-up Protocol",
            "exercises": [
              {"name": "Pull-ups", "sets": 10, "reps": "10", "rest_sec": 60}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Pull-ups", "sets_done": 10, "reps_done": "10"}
            ],
            "rpe_actual": 8,
            "duration_actual": 3,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Total reps: 100. Max possible: 3×80=240. 100 < 240 → APPROVED (global rule misses it)"
          },
          "variant_b_result": {
            "status": "FLAGGED",
            "integrity_score": 0.3,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: 100÷40 + (10×1) = 2.5 + 10 = 12.5 min. Actual: 3 min = 0.24× expected < 0.3 threshold → SUSPICIOUS (pull-ups are much slower than 80/min)"
          },
          "difference": "Variant B CATCHES cheater (FLAGGED), Variant A MISSES (APPROVED) - exercise-specific limits crucial"
        },
        {
          "name": "Scenario 3: Fast Crunches (Normal for Exercise)",
          "quest": {
            "quest_name": "C-Rank Core Protocol",
            "exercises": [
              {"name": "Crunches", "sets": 5, "reps": "30", "rest_sec": 30}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Crunches", "sets_done": 5, "reps_done": "30"}
            ],
            "rpe_actual": 6,
            "duration_actual": 2,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Total reps: 150. Max possible: 2×80=160. 150 < 160 → APPROVED (but close to limit)"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: 150÷120 + (5×0.5) = 1.25 + 2.5 = 3.75 min. Actual: 2 min = 0.53× expected > 0.3 threshold → APPROVED (crunches can be done quickly)"
          },
          "difference": "Variant A incorrectly suspicious, Variant B correctly approves - exercise-specific accuracy"
        },
        {
          "name": "Scenario 4: Slow Strength Training (Not Cheating)",
          "quest": {
            "quest_name": "B-Rank Push-up Strength",
            "exercises": [
              {"name": "Push-ups", "sets": 5, "reps": "20", "rest_sec": 90}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 5, "reps_done": "20"}
            ],
            "rpe_actual": 8,
            "duration_actual": 15,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Total reps: 100. Max possible: 15×80=1200. 100 < 1200 → APPROVED (very slow but not flagged)"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: 100÷90 + (5×1.5) = 1.11 + 7.5 = 8.61 min. Actual: 15 min = 1.74× expected → APPROVED (slow strength training is normal)"
          },
          "difference": "Both approve - slow strength training is valid"
        },
        {
          "name": "Scenario 5: Suspicious Burpee Count",
          "quest": {
            "quest_name": "A-Rank HIIT Protocol",
            "exercises": [
              {"name": "Burpees", "sets": 10, "reps": "15", "rest_sec": 45}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Burpees", "sets_done": 10, "reps_done": "15"}
            ],
            "rpe_actual": 9,
            "duration_actual": 2,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Total reps: 150. Max possible: 2×80=160. 150 < 160 → APPROVED (global rule doesn't catch it)"
          },
          "variant_b_result": {
            "status": "FLAGGED",
            "integrity_score": 0.3,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Expected: 150÷30 + (10×0.75) = 5 + 7.5 = 12.5 min. Actual: 2 min = 0.16× expected < 0.3 threshold → SUSPICIOUS (burpees are slow, max 30/min)"
          },
          "difference": "Variant B CATCHES cheater (FLAGGED), Variant A MISSES (APPROVED) - exercise-specific limits essential"
        }
      ],
      "expected_results": {
        "total_runs": 100,
        "variant_a": {
          "success_rate": 0.80,
          "avg_score": 0.75,
          "avg_time_ms": 980
        },
        "variant_b": {
          "success_rate": 0.94,
          "avg_score": 0.91,
          "avg_time_ms": 1150
        },
        "p_value": 0.015,
        "is_significant": true,
        "improvement_delta": 0.213,
        "winner_id": "var_b"
      }
    },
    {
      "id": "exp_safety_aware",
      "name": "Judge Prompt: Safety-Aware Evaluation",
      "type": "prompt_ab_test",
      "description": "Compare no safety check vs comprehensive safety logic with soreness and exercise type",
      "min_sample_size": 50,
      "target_metric": "avg_score",
      "variants": [
        {
          "id": "var_a",
          "name": "Variant A: No Safety Check",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nSAFETY CHECK:\n- Always return safety_score = 1.0 (not implemented)\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user)"
          }
        },
        {
          "id": "var_b",
          "name": "Variant B: Comprehensive Safety",
          "config": {
            "prompt": "ROLE: You are \"The Judge,\" an impartial auditor of ASCEND.\nTASK: Evaluate the Hunter's performance log against the assigned quest.\n\nSAFETY CHECK - COMPREHENSIVE:\n\n1. MUSCLE SORENESS FACTORS:\n   - None: baseline safety_score = 1.0\n   - Mild (sore but functional): baseline = 0.9\n   - Moderate (noticeable pain): baseline = 0.8\n   - Severe (limits movement): baseline = 0.6\n\n2. INTENSITY FACTORS:\n   - If actual_rpe ≥ 9: safety_penalty = 0.2\n   - If actual_rpe ≥ 8: safety_penalty = 0.1\n   - Else: safety_penalty = 0\n\n3. EXERCISE TYPE RISK:\n   High Risk Exercises (explosive/jumping):\n   - Burpees, Box Jumps, Jump Squats, Jump Lunges\n   - If any of these AND muscle_soreness != \"None\" → additional penalty = 0.3\n\n   Moderate Risk (heavy compound):\n   - Deadlifts, Squats, Bench Press, Overhead Press\n   - If any of these AND muscle_soreness includes relevant area → additional penalty = 0.2\n\n4. CALCULATE FINAL SAFETY SCORE:\n   safety_score = max(0.3, baseline - intensity_penalty - exercise_penalty)\n   - Minimum score of 0.3 to prevent total rejection for minor issues\n\n5. STATUS IMPACT:\n   - If safety_score < 0.5: status = FLAGGED with safety warning\n   - If safety_score < 0.7: system_message includes safety advice\n   - Else: normal processing\n\nOUTPUT: Strict JSON with:\n- status: APPROVED | REJECTED | FLAGGED | PENDING_VERIFICATION\n- integrity_score: 0.0 - 1.0\n- effort_score: 0.0 - 1.0\n- safety_score: 0.0 - 1.0\n- system_message: String (feedback to user, include safety warnings if applicable)"
          }
        }
      ],
      "test_scenarios": [
        {
          "name": "Scenario 1: Normal Healthy User",
          "quest": {
            "quest_name": "C-Rank Full Body",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 6},
              {"name": "Squats", "sets": 3, "reps": "10", "rpe_target": 6}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "10"},
              {"name": "Squats", "sets_done": 3, "reps_done": "10"}
            ],
            "rpe_actual": 6,
            "duration_actual": 8,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Normal submission - safety always 1.0"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Baseline: 1.0 (no soreness), Intensity: 0 (RPE 6 < 8), Exercise: 0 → safety_score = 1.0"
          },
          "difference": "Both approve - normal healthy user"
        },
        {
          "name": "Scenario 2: High Intensity with Mild Soreness",
          "quest": {
            "quest_name": "B-Rank HIIT Protocol",
            "exercises": [
              {"name": "Burpees", "sets": 5, "reps": "15", "rpe_target": 8}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Burpees", "sets_done": 5, "reps_done": "15"}
            ],
            "rpe_actual": 9,
            "duration_actual": 6,
            "muscle_soreness": "Mild leg soreness"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "High intensity but no safety check - approved"
          },
          "variant_b_result": {
            "status": "FLAGGED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 0.4,
            "reasoning": "Baseline: 0.9 (mild soreness), Intensity: 0.2 (RPE 9), Exercise: 0.3 (burpees + soreness) → 0.9 - 0.2 - 0.3 = 0.4 < 0.5 → FLAGGED for safety"
          },
          "difference": "Variant B CATCHES injury risk (FLAGGED), Variant A IGNORES (APPROVED) - safety protection"
        },
        {
          "name": "Scenario 3: Moderate Soreness, Normal Intensity",
          "quest": {
            "quest_name": "C-Rank Recovery",
            "exercises": [
              {"name": "Push-ups", "sets": 3, "reps": "10", "rpe_target": 5}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Push-ups", "sets_done": 3, "reps_done": "8"}
            ],
            "rpe_actual": 5,
            "duration_actual": 5,
            "muscle_soreness": "Moderate chest soreness"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Normal submission - safety always 1.0"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 0.8,
            "reasoning": "Baseline: 0.8 (moderate soreness), Intensity: 0 (RPE 5), Exercise: 0 (push-ups, not high risk) → safety_score = 0.8 ≥ 0.7, so APPROVED with advice"
          },
          "difference": "Both approve, but Variant B gives appropriate safety_score (0.8) and would include advice"
        },
        {
          "name": "Scenario 4: Heavy Squats with Knee Pain",
          "quest": {
            "quest_name": "A-Rank Leg Day",
            "exercises": [
              {"name": "Squats", "sets": 5, "reps": "5", "rpe_target": 9},
              {"name": "Lunges", "sets": 3, "reps": "10", "rpe_target": 8}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Squats", "sets_done": 5, "reps_done": "5"},
              {"name": "Lunges", "sets_done": 3, "reps_done": "10"}
            ],
            "rpe_actual": 9,
            "duration_actual": 12,
            "muscle_soreness": "Severe knee pain"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "Heavy workout with pain - but no safety check, so approved"
          },
          "variant_b_result": {
            "status": "REJECTED",
            "integrity_score": 0.5,
            "effort_score": 1.0,
            "safety_score": 0.3,
            "reasoning": "Baseline: 0.6 (severe soreness), Intensity: 0.2 (RPE 9), Exercise: 0.2 (squats + knee pain) → 0.6 - 0.2 - 0.2 = 0.2, capped at 0.3 < 0.5 → REJECTED for safety"
          },
          "difference": "Variant B PREVENTS injury (REJECTED), Variant A ALLOWS risk (APPROVED) - critical safety feature"
        },
        {
          "name": "Scenario 5: Box Jumps with No Soreness",
          "quest": {
            "quest_name": "S-Rank Explosive Protocol",
            "exercises": [
              {"name": "Box Jumps", "sets": 5, "reps": "10", "rpe_target": 9}
            ]
          },
          "submission": {
            "exercises_completed": [
              {"name": "Box Jumps", "sets_done": 5, "reps_done": "10"}
            ],
            "rpe_actual": 9,
            "duration_actual": 8,
            "muscle_soreness": "None"
          },
          "variant_a_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 1.0,
            "reasoning": "High intensity explosive workout - approved"
          },
          "variant_b_result": {
            "status": "APPROVED",
            "integrity_score": 1.0,
            "effort_score": 1.0,
            "safety_score": 0.8,
            "reasoning": "Baseline: 1.0 (no soreness), Intensity: 0.2 (RPE 9), Exercise: 0 (high risk but no soreness) → safety_score = 0.8 ≥ 0.7, so APPROVED with caution advice"
          },
          "difference": "Both approve, but Variant B notes intensity risk (safety_score 0.8) with advice"
        }
      ],
      "expected_results": {
        "total_runs": 100,
        "variant_a": {
          "success_rate": 0.90,
          "avg_score": 0.85,
          "avg_time_ms": 900
        },
        "variant_b": {
          "success_rate": 0.88,
          "avg_score": 0.82,
          "avg_time_ms": 1050
        },
        "p_value": 0.45,
        "is_significant": false,
        "improvement_delta": -0.034,
        "winner_id": null
      }
    }
  ]
}
